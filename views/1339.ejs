<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        LeetCode 1339: Maximum Product of Splitted Binary Tree (C++)
    </title>
    <link rel="stylesheet" href="/styles.css" />
    <script src="/solution.js"></script>
</head>

<body>
    <main>
        <h1>LeetCode 1339: Maximum Product of Splitted Binary Tree (C++)</h1>
        <div class="problem-description">
            <p><strong>Problem:</strong>
                Given the root of a binary tree, split the binary tree into two subtrees by removing one edge such that
                the
                product of the sums of the subtrees is maximized. Return the maximum product of the sums of the two
                subtrees.
                Since the answer may be too large, return it modulo 10^9 + 7. Note that you need to maximize the answer
                before taking the mod, not after. The solution uses two passes: first to calculate the total sum, then
                another pass to try each possible cut and calculate the product of the two resulting subtree sums.
            </p>
            <p><strong>Example:</strong>
                Input: root = [1,2,3,4,5,6] → Output: 110. Remove edge between 2 and 4. Subtree sums: (2+4+5)=11 and
                (1+3+6)=10. Product = 11*10 = 110.
                Input: root = [1,null,2,3,4,null,null,5,6] → Output: 90. Remove edge to split optimally.
                Input: root = [2,3,9,10,7,8,6,5,4,11,1] → Output: 1025. Maximum product after optimal split.
            </p>
        </div>
        <div class="code-container">
            <button class="copy-button" onclick="copyCode(this)">Copy Code</button>
            <pre><code class="language-cpp">class Solution {
public:
    long long fullSum = 0;
    long long answer = 0;
    const int MOD = 1e9 + 7;
    long long findSum(TreeNode* node) {
        if (!node) return 0;
        // Postorder sum calculation
        long long curr =
            node-&gt;val + findSum(node-&gt;left) + findSum(node-&gt;right);
        // Consider cutting here
        answer = max(answer, curr * (fullSum - curr));
        return curr;
    }
    int maxProduct(TreeNode* root) {
        // Get total tree sum first
        fullSum = findSum(root);
        answer = 0;
        findSum(root);
        return answer % MOD;
    }
};</code></pre>
        </div>
        <a href="/" class="back-link">← Back to Home</a>
    </main>
</body>

</html>